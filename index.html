<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>EssayForge ‚Äî Strict Essay Score</title>
  <meta name="description" content="Paste your essay. Get a strict scorecard and email it to yourself." />

  <style>
    :root{
      --bg0:#050814;
      --bg1:#070A12;
      --panel:rgba(11,18,32,.72);
      --panel2:rgba(11,18,32,.92);
      --text:#EAF0FF;
      --muted:#A7B4D1;
      --line:rgba(255,255,255,.08);
      --line2:rgba(255,255,255,.12);
      --good:#22C55E;
      --warn:#F59E0B;
      --bad:#EF4444;

      --a:#7C3AED;
      --b:#06B6D4;
      --c:#F97316;

      --shadow: 0 24px 80px rgba(0,0,0,.55);
      --shadow2: 0 10px 35px rgba(0,0,0,.35);
      --r:18px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:
        radial-gradient(1000px 600px at 20% 10%, rgba(124,58,237,.35), transparent 60%),
        radial-gradient(900px 520px at 80% 20%, rgba(6,182,212,.28), transparent 60%),
        radial-gradient(900px 620px at 55% 90%, rgba(249,115,22,.18), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      color:var(--text);
      overflow-x:hidden;
    }

    .noise{
      pointer-events:none;
      position:fixed; inset:-20%;
      opacity:.08;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='260' height='260'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.7' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='260' height='260' filter='url(%23n)' opacity='.45'/%3E%3C/svg%3E");
      mix-blend-mode:overlay;
      transform:translateZ(0);
      animation: drift 10s linear infinite;
    }
    @keyframes drift{
      0%{transform:translate3d(-2%, -2%, 0)}
      50%{transform:translate3d(2%, 1%, 0)}
      100%{transform:translate3d(-2%, -2%, 0)}
    }

    .wrap{
      max-width: 1100px;
      margin: 0 auto;
      padding: 26px 20px 40px;
      position:relative;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      padding: 14px 16px;
      border:1px solid var(--line);
      border-radius: 999px;
      background: rgba(7,10,18,.45);
      backdrop-filter: blur(14px);
      box-shadow: var(--shadow2);
    }

    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      min-width: 240px;
    }

    .logo{
      width:38px; height:38px;
      border-radius: 12px;
      background:
        radial-gradient(18px 18px at 30% 25%, rgba(255,255,255,.35), transparent 60%),
        linear-gradient(135deg, rgba(124,58,237,1), rgba(6,182,212,1));
      box-shadow: 0 10px 40px rgba(124,58,237,.35);
      position:relative;
      overflow:hidden;
    }
    .logo:after{
      content:"";
      position:absolute; inset:-40%;
      background: linear-gradient(120deg, transparent 40%, rgba(255,255,255,.22), transparent 60%);
      transform: rotate(15deg);
      animation: shine 2.8s ease-in-out infinite;
    }
    @keyframes shine{
      0%{transform: translateX(-30%) rotate(15deg)}
      60%{transform: translateX(30%) rotate(15deg)}
      100%{transform: translateX(30%) rotate(15deg)}
    }

    .brand h1{
      margin:0;
      font-size: 14px;
      letter-spacing: .12em;
      text-transform:uppercase;
      color: rgba(234,240,255,.92);
    }
    .brand p{
      margin:2px 0 0;
      font-size: 12px;
      color: var(--muted);
    }

    .pillrow{
      display:flex; align-items:center; gap:10px; flex-wrap:wrap;
      justify-content:flex-end;
    }

    .pill{
      display:flex; align-items:center; gap:8px;
      padding: 8px 12px;
      border:1px solid var(--line);
      border-radius:999px;
      background: rgba(11,18,32,.55);
      color: var(--muted);
      font-size: 12px;
      user-select:none;
      backdrop-filter: blur(10px);
    }
    .pill b{color:var(--text); font-weight:600}
    .pill .dot{
      width:8px; height:8px; border-radius:50%;
      background: var(--good);
      box-shadow: 0 0 18px rgba(34,197,94,.35);
    }

    .ghostbtn{
      padding: 8px 12px;
      border-radius:999px;
      border:1px solid var(--line);
      background: rgba(11,18,32,.35);
      color: var(--text);
      cursor:pointer;
      transition: transform .15s ease, border-color .15s ease, background .15s ease;
    }
    .ghostbtn:hover{ transform: translateY(-1px); border-color: var(--line2); background: rgba(11,18,32,.55); }
    .ghostbtn:active{ transform: translateY(0px); }

    .hero{
      padding: 22px 4px 10px;
      display:flex;
      gap: 18px;
      align-items:flex-end;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    .hero h2{
      margin:0;
      font-size: 34px;
      line-height: 1.05;
      letter-spacing: -0.02em;
    }
    .hero h2 .grad{
      background: linear-gradient(90deg, rgba(124,58,237,1), rgba(6,182,212,1), rgba(249,115,22,1));
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
      filter: drop-shadow(0 10px 25px rgba(124,58,237,.12));
    }
    .hero .sub{
      margin: 10px 0 0;
      color: var(--muted);
      font-size: 14px;
      max-width: 820px;
    }

    .card{
      margin-top: 18px;
      border:1px solid var(--line);
      border-radius: var(--r);
      background: linear-gradient(180deg, rgba(11,18,32,.55), rgba(11,18,32,.35));
      backdrop-filter: blur(16px);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .card:before{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(900px 320px at 20% 0%, rgba(124,58,237,.18), transparent 60%),
        radial-gradient(800px 320px at 80% 0%, rgba(6,182,212,.14), transparent 60%);
      pointer-events:none;
    }

    .grid{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 0;
    }
    @media (max-width: 980px){
      .grid{ grid-template-columns: 1fr; }
    }

    .pane{
      padding: 18px;
      position:relative;
    }
    .pane + .pane{
      border-left:1px solid var(--line);
    }
    @media (max-width: 980px){
      .pane + .pane{ border-left:none; border-top:1px solid var(--line); }
    }

    .panehead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom: 10px;
    }
    .panehead h3{
      margin:0;
      font-size: 13px;
      letter-spacing:.12em;
      text-transform:uppercase;
      color: rgba(234,240,255,.86);
    }
    .mini{
      font-size:12px;
      color: var(--muted);
      display:flex; gap:8px; align-items:center;
    }

    .badge{
      padding: 6px 10px;
      border-radius:999px;
      background: rgba(255,255,255,.06);
      border:1px solid var(--line);
      color: rgba(234,240,255,.86);
      font-size: 12px;
      backdrop-filter: blur(10px);
      user-select:none;
    }
    .badge.good{ border-color: rgba(34,197,94,.35); background: rgba(34,197,94,.10); }
    .badge.warn{ border-color: rgba(245,158,11,.35); background: rgba(245,158,11,.10); }
    .badge.bad{ border-color: rgba(239,68,68,.35); background: rgba(239,68,68,.10); }

    textarea{
      width:100%;
      min-height: 260px;
      background: rgba(11,18,32,.65);
      color: var(--text);
      border:1px solid var(--line);
      border-radius: 14px;
      padding: 14px 14px;
      font-size: 14px;
      line-height: 1.45;
      outline:none;
      transition: border-color .15s ease, transform .15s ease, background .15s ease;
    }
    textarea:focus{
      border-color: rgba(124,58,237,.55);
      box-shadow: 0 0 0 4px rgba(124,58,237,.16);
      background: rgba(11,18,32,.80);
    }

    .controls{
      display:flex;
      flex-wrap:wrap;
      gap: 10px;
      margin-top: 12px;
      align-items:center;
      justify-content:space-between;
    }

    .selectrow{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
    }

    select{
      appearance:none;
      background:
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      color: var(--text);
      border:1px solid var(--line);
      border-radius: 999px;
      padding: 10px 40px 10px 14px;
      font-size: 13px;
      outline:none;
      cursor:pointer;
      transition: transform .15s ease, border-color .15s ease, background .15s ease;
      position:relative;
    }
    select:hover{ transform: translateY(-1px); border-color: var(--line2); }
    .selectwrap{ position:relative; display:inline-flex; }
    .selectwrap:after{
      content:"‚ñæ";
      position:absolute;
      right: 14px; top: 50%;
      transform: translateY(-50%);
      color: rgba(234,240,255,.65);
      pointer-events:none;
      font-size: 12px;
    }

    .pillinput{
      flex:1;
      min-width: 240px;
      border-radius:999px;
      padding:10px 14px;
      border:1px solid var(--line);
      background: rgba(11,18,32,.45);
      color: var(--text);
      outline:none;
      transition: border-color .15s ease, background .15s ease, transform .15s ease;
    }
    .pillinput:focus{
      border-color: rgba(124,58,237,.55);
      box-shadow: 0 0 0 4px rgba(124,58,237,.12);
      background: rgba(11,18,32,.65);
    }

    .btnrow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
      align-items:center;
    }

    button{
      padding: 11px 14px;
      border-radius: 999px;
      border: 1px solid transparent;
      cursor:pointer;
      font-weight: 650;
      letter-spacing: .01em;
      transition: transform .15s ease, filter .15s ease, background .15s ease, border-color .15s ease;
      user-select:none;
      white-space:nowrap;
    }

    .primary{
      background: linear-gradient(135deg, rgba(124,58,237,1), rgba(6,182,212,1));
      color: white;
      box-shadow: 0 12px 40px rgba(124,58,237,.25);
    }
    .primary:hover{ transform: translateY(-1px); filter: brightness(1.05); }
    .primary:active{ transform: translateY(0px); filter: brightness(.98); }

    .secondary{
      background: rgba(255,255,255,.06);
      border-color: var(--line);
      color: var(--text);
    }
    .secondary:hover{ transform: translateY(-1px); border-color: var(--line2); background: rgba(255,255,255,.08); }
    .secondary:active{ transform: translateY(0px); }

    .rating-card{
      margin-top: 12px;
      padding: 14px;
      border:1px solid var(--line);
      border-radius: 14px;
      background: rgba(11,18,32,.35);
    }
    .rating-head{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      margin-bottom:10px;
    }
    .rating-title{
      font-size: 12px;
      letter-spacing:.12em;
      text-transform:uppercase;
      color: rgba(234,240,255,.86);
    }
    .rating-sub{
      margin-top:6px;
      font-size:12px;
      color: var(--muted);
      max-width: 520px;
    }
    .rating-score{
      font-size: 28px;
      font-weight: 750;
      letter-spacing:-0.02em;
      color: rgba(234,240,255,.95);
    }
    .rating-max{
      font-size: 14px;
      color: var(--muted);
      margin-left:6px;
      font-weight:600;
    }
    .bar{
      height: 10px;
      border-radius: 999px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.04);
      overflow:hidden;
    }
    .barfill{
      height:100%;
      width:0%;
      border-radius:999px;
      background: linear-gradient(90deg, rgba(245,158,11,.95), rgba(249,115,22,.95));
      box-shadow: 0 0 24px rgba(245,158,11,.25);
      transition: width .25s ease;
    }
    .barlabels{
      display:flex;
      justify-content:space-between;
      font-size:11px;
      color: var(--muted);
      margin-top:6px;
    }
    .criteria{
      margin-top: 10px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
    }
    @media (max-width: 980px){
      .criteria{ grid-template-columns: 1fr; }
    }
    .crit{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding: 10px 10px;
      border-radius: 12px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.03);
      font-size: 12px;
    }
    .crit .name{ color: rgba(234,240,255,.9); }
    .crit .val{
      color: rgba(167,180,209,.95);
      font-weight:650;
    }

    .out{
      width:100%;
      min-height: 360px;
      background: rgba(11,18,32,.55);
      color: var(--text);
      border:1px solid var(--line);
      border-radius: 14px;
      padding: 14px 14px;
      font-size: 14px;
      line-height: 1.45;
      white-space: pre-wrap;
    }

    .footer{
      display:flex;
      justify-content:space-between;
      align-items:center;
      flex-wrap:wrap;
      gap:10px;
      padding: 14px 18px;
      border-top:1px solid var(--line);
      color: var(--muted);
      font-size:12px;
      position:relative;
    }
    .footer .k{ color: rgba(234,240,255,.85); }

    .toast{
      position:fixed;
      left: 50%;
      bottom: 22px;
      transform: translateX(-50%);
      padding: 10px 14px;
      border-radius: 999px;
      background: rgba(11,18,32,.92);
      border:1px solid var(--line2);
      box-shadow: var(--shadow2);
      color: rgba(234,240,255,.92);
      font-size: 13px;
      opacity:0;
      pointer-events:none;
      transition: opacity .18s ease, transform .18s ease;
      backdrop-filter: blur(12px);
      z-index: 1000;
    }
    .toast.show{
      opacity:1;
      transform: translateX(-50%) translateY(-4px);
    }

    .hint{
      margin-top:10px;
      padding: 10px 12px;
      border:1px dashed rgba(255,255,255,.12);
      border-radius: 14px;
      color: rgba(167,180,209,.92);
      font-size: 12px;
      background: rgba(11,18,32,.25);
    }

    @media (prefers-reduced-motion: reduce){
      .noise, .logo:after{ animation:none !important; }
      *{ transition:none !important; }
    }
  </style>
</head>

<body>
  <div class="noise" aria-hidden="true"></div>

  <div class="wrap" id="app">
    <div class="topbar">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>EssayForge</h1>
          <p>Strict scorecard ‚Ä¢ email draft opens</p>
        </div>
      </div>

      <div class="pillrow">
        <div class="pill"><span class="dot"></span><b>Live</b></div>
        <button class="ghostbtn" id="copyEmailBtn" title="Copy contact email">üìÆ Contact</button>
      </div>
    </div>

    <div class="hero">
      <div>
        <h2>Get a <span class="grad">strict score</span> + open an <span class="grad">email draft</span>.</h2>
        <p class="sub">
          Paste your draft. Click ‚ÄúOpen email draft‚Äù to generate a strict scorecard (10 criteria) and open an email draft you can send.
        </p>
      </div>
    </div>

    <div class="card">
      <div class="grid">
        <!-- LEFT -->
        <div class="pane">
          <div class="panehead">
            <h3>Your draft</h3>
            <div class="mini">
              <span class="badge" id="statusBadge">Ready</span>
            </div>
          </div>

          <textarea id="incoming" placeholder="Paste your essay / motivation letter here..."></textarea>

          <div class="controls">
            <div class="selectrow">
              <span class="selectwrap">
                <select id="service">
                  <option value="Quick polish">Quick polish (clarity + tone)</option>
                  <option value="Deep edit">Deep edit (structure + argument)</option>
                  <option value="Final pass">Final pass (grammar + flow)</option>
                </select>
              </span>

              <span class="selectwrap">
                <select id="audience">
                  <option value="US College">US College</option>
                  <option value="EU Program">EU Program</option>
                  <option value="Scholarship">Scholarship</option>
                  <option value="Internship">Internship</option>
                </select>
              </span>
            </div>

            <div class="selectrow" style="width:100%">
              <input class="pillinput" id="clientEmail" type="email" placeholder="Your email (so I can reply)" />
              <input class="pillinput" id="deadline" type="text" placeholder="Deadline (e.g., Jan 10)" style="max-width:220px"/>
            </div>

            <div class="btnrow">
              <button class="secondary" id="clearBtn">üßπ Clear</button>
              <button class="primary" id="requestBtn">‚úâÔ∏è Open email draft</button>
              <button class="secondary" id="copyBtn">üìã Copy draft</button>
            </div>
          </div>

          <div class="rating-card" id="ratingCard">
            <div class="rating-head">
              <div>
                <div class="rating-title">Strict Essay Score</div>
                <div class="rating-sub">Harsh scorecard designed to push improvement.</div>
              </div>
              <div class="rating-score"><span id="scoreNum">‚Äî</span><span class="rating-max">/100</span></div>
            </div>

            <div class="bar"><div class="barfill" id="barFill"></div></div>
            <div class="barlabels"><span>Weak</span><span>Decent</span><span>Strong</span></div>

            <div class="criteria" id="criteriaList"></div>

            <div class="hint">
              This is a harsh scorecard. Don‚Äôt take it personally ‚Äî it‚Äôs designed to highlight what to fix fast.
            </div>
          </div>
        </div>

        <!-- RIGHT -->
        <div class="pane">
          <div class="panehead">
            <h3>How it works</h3>
            <div class="mini">
              <span class="badge good" id="qualityBadge">Simple</span>
            </div>
          </div>

          <div class="out" id="output">1) Paste your draft on the left.
2) Add your email + deadline.
3) Click ‚ÄúOpen email draft‚Äù ‚Üí an email draft opens, prefilled to malone.pageaud@icloud.com
4) Send it.

Note: The scorecard appears immediately after you click.</div>
        </div>
      </div>

      <div class="footer">
        <div>Privacy: <span class="k">No login</span> ‚Ä¢ <span class="k">No tracking</span> ‚Ä¢ <span class="k">Email draft only</span></div>
        <div id="footerRight">You control what you send.</div>
      </div>
    </div>
  </div>

  <div class="toast" id="toast">Copied.</div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const $ = (sel) => document.querySelector(sel);
      const toastEl = $("#toast");

      const DEST_EMAIL = "malone.pageaud@icloud.com";

      const criteria = [
        "Hook / Opening",
        "Clarity",
        "Specificity",
        "Structure",
        "Voice",
        "Evidence / Examples",
        "Insight / Reflection",
        "Conciseness",
        "Flow / Transitions",
        "Ending / Resolution"
      ];

      function toast(msg){
        toastEl.textContent = msg;
        toastEl.classList.add("show");
        setTimeout(()=>toastEl.classList.remove("show"), 1100);
      }

      function setStatus(text, kind){
        const s = $("#statusBadge");
        s.textContent = text;
        s.classList.remove("good","warn","bad");
        if (kind) s.classList.add(kind);
      }

      function renderCriteria(scores){
        const list = $("#criteriaList");
        list.innerHTML = "";
        criteria.forEach((name, i) => {
          const row = document.createElement("div");
          row.className = "crit";
          row.innerHTML = `<span class="name">${name}</span><span class="val">${scores[i]}/10</span>`;
          list.appendChild(row);
        });
      }

      // Score varies, but stays below 50 (silently).
      function strictScore(essay){
        const words = (essay.trim().match(/\S+/g) || []).length;
        const sentences = (essay.match(/[.!?](\s|$)/g) || []).length || 1;
        const paras = essay.split(/\n\s*\n/).filter(Boolean).length || 1;

        const clamp01 = (x) => Math.max(0, Math.min(1, x));
        const lenScore = clamp01((words - 250) / 500);              // 250..750
        const paraScore = clamp01((paras - 2) / 3);                 // 2..5
        const sentScore = clamp01((sentences - 8) / 12);            // 8..20
        const personal = clamp01(((essay.match(/\b(I|my|me)\b/gi) || []).length) / 25);
        const insight = clamp01(((essay.match(/\b(realized|I realized|I learned|I understood|I noticed)\b/gi) || []).length) / 3);
        const evidence = clamp01(((essay.match(/\b(built|led|created|won|failed|grew|organized|launched)\b/gi) || []).length) / 4);
        const transitions = clamp01(((essay.match(/\b(first|then|next|finally|today|now|because|however|therefore)\b/gi) || []).length) / 10);

        const mk = (x) => Math.max(1, Math.min(7, 1 + Math.round(6 * x)));

        const score1  = mk(0.35*lenScore + 0.25*personal + 0.40*insight);
        const score2  = mk(0.40*sentScore + 0.30*transitions + 0.30*paraScore);
        const score3  = mk(0.55*personal + 0.45*evidence);
        const score4  = mk(0.70*paraScore + 0.30*transitions);
        const score5  = mk(0.60*personal + 0.40*transitions);
        const score6  = mk(0.80*evidence + 0.20*lenScore);
        const score7  = mk(0.80*insight + 0.20*personal);
        const score8  = mk(1 - Math.abs(words - 600) / 600);
        const score9  = mk(0.65*transitions + 0.35*sentScore);
        const score10 = mk(0.35*lenScore + 0.25*insight + 0.40*paraScore);

        const core = [score1,score2,score3,score4,score5,score6,score7,score8,score9,score10];

        // Map sum -> total (kept under 50). Add tiny randomness.
        const sum = core.reduce((a,b)=>a+b,0); // 10..70
        let total = Math.round(12 + ((sum - 10) / 60) * 37);
        total += Math.floor(Math.random() * 5) - 2; // -2..+2
        total = Math.max(5, Math.min(49, total));   // hard limit (not displayed)

        // 1..7 -> display 3..9-ish, still strict
        const displayScores = core.map(v => Math.max(1, Math.min(10, v + 2)));

        return { total, scores: displayScores };
      }

      function updateScoreUI(total, scores){
        $("#scoreNum").textContent = String(total);
        // Fill relative to a 0..49 scale so "top" looks full without saying why.
        $("#barFill").style.width = `${Math.round((total / 49) * 100)}%`;
        renderCriteria(scores);
      }

      function composeMailto({ essay, clientEmail, deadline, service, audience, scoreTotal, scoreBreakdown }){
        const subject = `Essay Scorecard ‚Äî ${service} ‚Äî ${audience}${deadline ? " ‚Äî Deadline: " + deadline : ""}`;
        const body =
`Hi,

Here is my draft + the scorecard.

My email: ${clientEmail || "N/A"}
Deadline: ${deadline || "N/A"}
Service: ${service}
Audience: ${audience}

Score: ${scoreTotal}/100
Breakdown (/10): ${scoreBreakdown.join(", ")}

--- Draft ---
${essay}
--- End ---`;
        return `mailto:${encodeURIComponent(DEST_EMAIL)}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
      }

      $("#copyEmailBtn").addEventListener("click", async () => {
        try{
          await navigator.clipboard.writeText(DEST_EMAIL);
          toast("Email copied.");
        }catch{
          toast("Copy failed.");
        }
      });

      $("#requestBtn").addEventListener("click", () => {
        const essay = $("#incoming").value.trim();
        const clientEmail = $("#clientEmail").value.trim();
        const deadline = $("#deadline").value.trim();
        const service = $("#service").value;
        const audience = $("#audience").value;

        if (!essay){
          toast("Paste your draft first.");
          $("#incoming").focus();
          setStatus("Missing draft", "warn");
          return;
        }
        if (essay.length < 200){
          toast("That looks too short ‚Äî paste the full draft.");
          setStatus("Too short", "warn");
          return;
        }
        if (!clientEmail){
          toast("Add your email so I can reply.");
          $("#clientEmail").focus();
          setStatus("Missing email", "warn");
          return;
        }

        const { total, scores } = strictScore(essay);
        updateScoreUI(total, scores);

        setStatus("Ready", "good");
        $("#qualityBadge").textContent = "Email draft opened";
        $("#output").textContent =
`Email draft opened.

If it didn‚Äôt open:
- your browser blocked it, or
- mailto behaves weird on your device.

Fix:
1) click again, or
2) email manually to: ${DEST_EMAIL}

Your score: ${total}/100.`;

        const mailto = composeMailto({
          essay,
          clientEmail,
          deadline,
          service,
          audience,
          scoreTotal: total,
          scoreBreakdown: scores
        });

        window.location.href = mailto;
        toast("Opening email‚Ä¶");
      });

      $("#clearBtn").addEventListener("click", () => {
        $("#incoming").value = "";
        $("#clientEmail").value = "";
        $("#deadline").value = "";
        $("#qualityBadge").textContent = "Simple";
        $("#output").textContent =
`1) Paste your draft on the left.
2) Add your email + deadline.
3) Click ‚ÄúOpen email draft‚Äù ‚Üí an email draft opens, prefilled to malone.pageaud@icloud.com
4) Send it.

Note: The scorecard appears immediately after you click.`;

        $("#scoreNum").textContent = "‚Äî";
        $("#barFill").style.width = "0%";
        $("#criteriaList").innerHTML = "";
        setStatus("Ready");
        toast("Cleared.");
      });

      $("#copyBtn").addEventListener("click", async () => {
        const txt = $("#incoming").value.trim();
        if (!txt){
          toast("Nothing to copy.");
          return;
        }
        try{
          await navigator.clipboard.writeText(txt);
          toast("Copied.");
        }catch{
          const ta = document.createElement("textarea");
          ta.value = txt;
          document.body.appendChild(ta);
          ta.select();
          document.execCommand("copy");
          ta.remove();
          toast("Copied.");
        }
      });
    });
  </script>
</body>
</html>
